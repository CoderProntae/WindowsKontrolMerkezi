<Page x:Class="WindowsKontrolMerkezi.Pages.ModlarPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="{DynamicResource Surface}">
  <StackPanel>
    <Grid Margin="0,0,0,16">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>
      <Button x:Name="BtnWindowsAyarlari" Grid.Column="0" Content="⚙ Windows ayarları" Click="BtnWindowsAyarlari_OnClick"
              Background="Transparent" Foreground="{DynamicResource TextDim}" BorderBrush="{DynamicResource Border}" BorderThickness="1"
              Padding="12,6" Cursor="Hand" Margin="0,0,12,0"/>
      <TextBlock Text="Modlar" Grid.Column="1" Foreground="{DynamicResource Text}" FontSize="18" FontWeight="SemiBold" VerticalAlignment="Center"/>
    </Grid>

    <Border Background="{DynamicResource Card}" BorderBrush="{DynamicResource Border}" BorderThickness="1" CornerRadius="12" Padding="20" Margin="0,0,0,12">
      <StackPanel>
        <TextBlock Text="Şu anki durum" Foreground="{DynamicResource Text}" FontSize="13" FontWeight="Medium" Margin="0,0,0,12"/>
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
          </Grid.ColumnDefinitions>
          <StackPanel Grid.Column="0">
            <TextBlock Text="Güç planı" Foreground="{DynamicResource TextDim}" FontSize="11"/>
            <TextBlock x:Name="TbPowerState" Foreground="{DynamicResource Text}" FontSize="13" Text="—"/>
          </StackPanel>
          <StackPanel Grid.Column="1">
            <TextBlock Text="Oyun modu" Foreground="{DynamicResource TextDim}" FontSize="11"/>
            <TextBlock x:Name="TbGameModeState" Foreground="{DynamicResource Text}" FontSize="13" Text="—"/>
          </StackPanel>
          <StackPanel Grid.Column="2">
            <TextBlock Text="Rahatsız etme" Foreground="{DynamicResource TextDim}" FontSize="11"/>
            <TextBlock x:Name="TbFocusState" Foreground="{DynamicResource Text}" FontSize="13" Text="—"/>
          </StackPanel>
        </Grid>
      </StackPanel>
    </Border>

    <TextBlock Text="Modları uygula veya özelleştir" Foreground="{DynamicResource TextDim}" FontSize="12" Margin="0,0,0,8"/>
    <ItemsControl x:Name="ModeCardsPanel" Margin="0,0,0,16"/>

    <!-- v1.3.0 Independent DND Section -->
    <Border Background="{DynamicResource Card}" BorderBrush="{DynamicResource Border}" BorderThickness="1" CornerRadius="12" Padding="20" Margin="0,0,0,12">
      <Grid>
        <StackPanel x:Name="PanelDndContent">
          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <StackPanel>
              <TextBlock Text="Bağımsız Rahatsız Etme Modu" Foreground="{DynamicResource Text}" FontSize="14" FontWeight="SemiBold"/>
              <TextBlock Text="Bildirimler ses/popup olmadan direkt uygulama içine kaydedilir." Foreground="{DynamicResource TextDim}" FontSize="11" Margin="0,2,0,0"/>
            </StackPanel>
            <CheckBox x:Name="ChkIndependentDnd" Grid.Column="1" Style="{StaticResource {x:Type CheckBox}}" VerticalAlignment="Center" Cursor="Hand" Checked="ChkIndependentDnd_OnChanged" Unchecked="ChkIndependentDnd_OnChanged"/>
          </Grid>
          
          <StackPanel x:Name="PanelWin11Warning" Visibility="Collapsed" Margin="0,12,0,0">
             <Border Height="1" Background="{DynamicResource Border}" Margin="0,0,0,12"/>
             <TextBlock Text="⚠️ Windows 11'de bu özellik şu an desteklenmemektedir, lütfen sonraki güncellemeyi bekleyin." 
                        Foreground="#FF5555" FontSize="11" FontWeight="Medium" TextWrapping="Wrap"/>
          </StackPanel>
        </StackPanel>

        <!-- Strikethrough Overlay for Win11 -->
        <Canvas x:Name="CanvasStrikethrough" Visibility="Collapsed" IsHitTestVisible="False">
           <Line X1="0" Y1="0" X2="{Binding ActualWidth, ElementName=PanelDndContent}" Y2="{Binding ActualHeight, ElementName=PanelDndContent}" Stroke="#88FF5555" StrokeThickness="2"/>
           <Line X1="{Binding ActualWidth, ElementName=PanelDndContent}" Y1="0" X2="0" Y2="{Binding ActualHeight, ElementName=PanelDndContent}" Stroke="#88FF5555" StrokeThickness="2"/>
        </Canvas>
      </Grid>
    </Border>

    <Border Background="{DynamicResource Card}" BorderBrush="{DynamicResource Border}" BorderThickness="1" CornerRadius="12" Padding="20" Margin="0,0,0,12">
      <StackPanel>
        <TextBlock x:Name="TbFormTitle" Text="Özel mod ekle" Foreground="{DynamicResource Text}" FontSize="13" FontWeight="Medium" Margin="0,0,0,8"/>
        <TextBlock Text="Ad ve seçenekleri belirleyip ekleyin. Eklenen modlar listede görünür ve kaldırılabilir." Foreground="{DynamicResource TextDim}" FontSize="11" Margin="0,0,0,12"/>
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="120"/>
            <ColumnDefinition Width="*"/>
          </Grid.ColumnDefinitions>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>
          <TextBlock Grid.Row="0" Grid.Column="0" Text="Mod adı" Foreground="{DynamicResource TextDim}" VerticalAlignment="Center" Margin="0,0,0,8"/>
          <TextBox x:Name="TxtNewModeName" Grid.Row="0" Grid.Column="1" Margin="0,0,0,8" Padding="8,6"/>
          <TextBlock Grid.Row="1" Grid.Column="0" Text="Seçenekler" Foreground="{DynamicResource TextDim}" VerticalAlignment="Center" Margin="0,0,0,8"/>
          <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="0,0,0,8">
            <CheckBox x:Name="ChkNewGameMode" Content="Oyun modu" Foreground="{DynamicResource Text}" Margin="0,0,16,0"/>
            <CheckBox x:Name="ChkNewFocusAssist" Content="Rahatsız etme" Foreground="{DynamicResource Text}" Margin="0,0,16,0"/>
            <TextBlock Text="Güç planı:" Foreground="{DynamicResource TextDim}" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <ComboBox x:Name="CmbNewPowerPlan" Width="180" VerticalAlignment="Center"/>
          </StackPanel>
          <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal">
            <Button x:Name="BtnAddMode" Content="Mod ekle" Click="BtnAddMode_OnClick" Padding="12,8"
                    Background="{DynamicResource Accent}" Foreground="White" BorderThickness="0" Cursor="Hand" Margin="0,0,8,0"/>
            <Button x:Name="BtnCancelEdit" Content="İptal" Click="BtnCancelEdit_OnClick" Visibility="Collapsed" Padding="12,8"
                    Background="Transparent" Foreground="{DynamicResource TextDim}" BorderBrush="{DynamicResource Border}" BorderThickness="1" Cursor="Hand"/>
          </StackPanel>
        </Grid>
      </StackPanel>
    </Border>
  </StackPanel>
</Page>
