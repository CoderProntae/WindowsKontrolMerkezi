<Page x:Class="WindowsKontrolMerkezi.Pages.AyarlarPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="{DynamicResource Surface}">
  <StackPanel>
    <TextBlock Text="Ayarlar" Foreground="{DynamicResource Text}" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,16"/>

    <Border Background="{DynamicResource Card}" BorderBrush="{DynamicResource Border}" BorderThickness="1" CornerRadius="12" Padding="20" Margin="0,0,0,12">
      <StackPanel>
        <TextBlock Text="Görünüm ve Kişiselleştirme" Foreground="{DynamicResource Text}" FontSize="13" FontWeight="Medium" Margin="0,0,0,12"/>
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="140"/>
            <ColumnDefinition Width="*"/>
          </Grid.ColumnDefinitions>
          
          <TextBlock Grid.Row="0" Grid.Column="0" Text="Tema" Foreground="{DynamicResource TextDim}" VerticalAlignment="Center" Margin="0,0,0,8"/>
          <ComboBox x:Name="CmbTheme" Grid.Row="0" Grid.Column="1" Margin="0,0,0,8" MinWidth="200" SelectionChanged="CmbTheme_SelectionChanged"/>
          
          <TextBlock Grid.Row="1" Grid.Column="0" Text="Saydamlık" Foreground="{DynamicResource TextDim}" VerticalAlignment="Center" Margin="0,0,0,8"/>
          <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="0,0,0,8">
            <Slider x:Name="SldOpacity" Width="180" Minimum="0.5" Maximum="1.0" Value="1.0" SmallChange="0.05" LargeChange="0.1" TickFrequency="0.05" IsSnapToTickEnabled="True" VerticalAlignment="Center" ValueChanged="SldOpacity_OnValueChanged"/>
            <TextBlock x:Name="TbOpacityVal" Text="100%" Foreground="{DynamicResource Text}" Margin="12,0,0,0" VerticalAlignment="Center"/>
          </StackPanel>

          <TextBlock Grid.Row="2" Grid.Column="0" Text="Windows ile başlat" Foreground="{DynamicResource TextDim}" VerticalAlignment="Center" Margin="0,0,0,8"/>
          <StackPanel Grid.Row="2" Grid.Column="1" Margin="0,0,0,8">
            <CheckBox x:Name="ChkStartWithWindows" Content="Uygulama Windows açılışında başlasın (exe ile)" Checked="ChkStartWithWindows_Changed" Unchecked="ChkStartWithWindows_Changed" Foreground="{DynamicResource Text}"/>
            <TextBlock x:Name="TbStartupHint" Foreground="{DynamicResource TextDim}" FontSize="10" Margin="0,2,0,0" TextWrapping="Wrap"/>
          </StackPanel>

          <TextBlock Grid.Row="3" Grid.Column="0" Text="Bildirim Paneli" Foreground="{DynamicResource TextDim}" VerticalAlignment="Center" Margin="0,0,0,8"/>
          <CheckBox x:Name="ChkNotifStartup" Grid.Row="3" Grid.Column="1" Content="Açılışta bildirim panelini göster" Checked="ChkNotifStartup_Changed" Unchecked="ChkNotifStartup_Changed" Foreground="{DynamicResource Text}" Margin="0,0,0,8"/>

          <TextBlock Grid.Row="4" Grid.Column="0" Text="Otomatik güncelleme" Foreground="{DynamicResource TextDim}" VerticalAlignment="Center"/>
          <CheckBox x:Name="ChkCheckUpdatesAtStartup" Grid.Row="4" Grid.Column="1" Content="Açılışta güncelleme kontrolü yap" Checked="ChkCheckUpdatesAtStartup_Changed" Unchecked="ChkCheckUpdatesAtStartup_Changed" Foreground="{DynamicResource Text}"/>
        </Grid>
      </StackPanel>
    </Border>

    <Border Background="{DynamicResource Card}" BorderBrush="{DynamicResource Border}" BorderThickness="1" CornerRadius="12" Padding="20" Margin="0,0,0,12">
      <StackPanel>
        <TextBlock Text="Sürüm" Foreground="{DynamicResource Text}" FontSize="13" FontWeight="Medium" Margin="0,0,0,8"/>
        <TextBlock x:Name="TbVersion" Foreground="{DynamicResource TextDim}" FontSize="12" Margin="0,0,0,12"/>
        <Button x:Name="BtnCheckUpdate" Content="Güncellemeleri kontrol et" Click="BtnCheckUpdate_OnClick"
                Background="{DynamicResource Accent}" Foreground="White" BorderThickness="0" Padding="16,8" Cursor="Hand" HorizontalAlignment="Left"/>
        <Border x:Name="UpdateResultPanel" Visibility="Collapsed" Background="#7C3AED20" BorderBrush="#7C3AED50" BorderThickness="1" CornerRadius="8" Padding="12" Margin="0,12,0,0">
          <StackPanel>
            <TextBlock x:Name="TbUpdateResult" Foreground="{DynamicResource Text}" TextWrapping="Wrap" FontSize="12"/>
            <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
            <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
              <Button x:Name="BtnUpdate" Content="Yükle ve Yeniden Başlat" Click="BtnUpdate_OnClick" Visibility="Collapsed" Margin="0,0,8,0"
                      Foreground="White" Background="{DynamicResource Accent}" BorderThickness="0" Cursor="Hand" Padding="16,8" FontWeight="Bold"/>
              <Button x:Name="BtnDownload" Content="Sadece indir" Click="BtnDownload_OnClick" Visibility="Collapsed"
                      Foreground="{DynamicResource TextDim}" Background="Transparent" BorderBrush="{DynamicResource Border}" BorderThickness="1" Cursor="Hand" Padding="12,8"/>
            </StackPanel>
            </StackPanel>
          </StackPanel>
        </Border>
      </StackPanel>
    </Border>

    <!-- Bildirim ve Geçmiş Ayarları (v1.3.0) -->
    <Border Background="{DynamicResource Card}" BorderBrush="{DynamicResource Border}" BorderThickness="1" CornerRadius="12" Padding="20" Margin="0,0,0,12">
      <StackPanel>
        <TextBlock Text="Bildirim ve Geçmiş Ayarları" Foreground="{DynamicResource Text}" FontSize="13" FontWeight="Medium" Margin="0,0,0,12"/>
        
        <CheckBox x:Name="ChkSaveHistory" Content="Bildirim geçmişini kaydet (silinenler oraya gider)" 
                  Checked="ChkSaveHistory_Changed" Unchecked="ChkSaveHistory_Changed" Foreground="{DynamicResource Text}" Margin="0,0,0,12"/>
        
        <StackPanel x:Name="PanelPurgeSettings" Margin="0,0,0,8">
          <Grid>
             <TextBlock Text="Bildirim saklama süresi (gün)" Foreground="{DynamicResource TextDim}" FontSize="11"/>
             <TextBlock x:Name="TbPurgeDaysText" Text="30 gün" Foreground="{DynamicResource Accent}" FontSize="11" HorizontalAlignment="Right" FontWeight="SemiBold"/>
          </Grid>
          <Slider x:Name="SldPurgeDays" Minimum="1" Maximum="90" Value="30" TickFrequency="1" IsSnapToTickEnabled="True" Margin="0,6,0,0" ValueChanged="SldPurgeDays_ValueChanged"/>
        </StackPanel>

        <TextBlock Text="Bildirimler ve geçmişteki kayıtlar belirlenen süre sonunda otomatik olarak temizlenir. Geçmişten silinme süresi de aynıdır." 
                   Foreground="{DynamicResource TextDim}" FontSize="10" TextWrapping="Wrap" Opacity="0.7"/>
        
        <Button x:Name="BtnClearHistory" Content="Geçmişi şimdi temizle" Click="BtnClearHistory_OnClick" Margin="0,12,0,0" Padding="12,6"
                Background="Transparent" Foreground="#FF5555" BorderBrush="#FF5555" BorderThickness="1" HorizontalAlignment="Left" Cursor="Hand"/>
      </StackPanel>
    </Border>

    <Border Background="{DynamicResource Card}" BorderBrush="{DynamicResource Border}" BorderThickness="1" CornerRadius="12" Padding="20" Margin="0,0,0,12">
      <StackPanel>
        <TextBlock Text="Bakım" Foreground="{DynamicResource Text}" FontSize="13" FontWeight="Medium" Margin="0,0,0,8"/>
        <TextBlock Text="Geçici dosyalar ve bu uygulamanın kullanmadığı bellek; önemli uygulamalar kapatılmaz." Foreground="{DynamicResource TextDim}" FontSize="11" Margin="0,0,0,12" TextWrapping="Wrap"/>
        <StackPanel Orientation="Horizontal">
          <Button x:Name="BtnMaintenance" Content="Bakımı çalıştır (TEMP + RAM)" Click="BtnMaintenance_OnClick" Margin="0,0,8,0" Padding="12,8" Cursor="Hand"
                  Background="{DynamicResource Accent}" Foreground="White" BorderThickness="0"/>
          <Button x:Name="BtnTempClean" Content="Sadece %TEMP%" Click="BtnTempClean_OnClick" Margin="0,0,8,0" Padding="12,8" Cursor="Hand"
                  Background="Transparent" Foreground="{DynamicResource Text}" BorderBrush="{DynamicResource Border}" BorderThickness="1"/>
          <Button x:Name="BtnRamClean" Content="Sadece RAM küçült" Click="BtnRamClean_OnClick" Padding="12,8" Cursor="Hand"
                  Background="Transparent" Foreground="{DynamicResource Text}" BorderBrush="{DynamicResource Border}" BorderThickness="1"/>
        </StackPanel>
        <TextBlock x:Name="TbMaintenanceResult" Foreground="{DynamicResource TextDim}" FontSize="11" Margin="0,8,0,0" TextWrapping="Wrap" Visibility="Collapsed"/>
      </StackPanel>
    </Border>

    <Border Background="{DynamicResource Card}" BorderBrush="{DynamicResource Border}" BorderThickness="1" CornerRadius="12" Padding="20">
      <StackPanel>
        <TextBlock Text="Değişiklik günlüğü" Foreground="{DynamicResource Text}" FontSize="13" FontWeight="Medium" Margin="0,0,0,8"/>
        <ScrollViewer MaxHeight="240" VerticalScrollBarVisibility="Auto">
          <TextBlock x:Name="TbChangelog" Foreground="{DynamicResource TextDim}" FontSize="11" TextWrapping="Wrap" FontFamily="Consolas"/>
        </ScrollViewer>
      </StackPanel>
    </Border>
  </StackPanel>
</Page>
